<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>iCar - Service Tracker</title>
  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background: linear-gradient(135deg, #2a2a72, #009ffd);
      color: #333;
      margin: 0;
      padding: 20px;
    }

    .container {
      background-color: #fff;
      border-radius: 15px;
      padding: 25px;
      max-width: 420px;
      margin: 0 auto;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
      text-align: center;
    }

    h1 {
      color: #007bff;
      margin-bottom: 10px;
    }

    h2 {
      color: #444;
      font-size: 1.1em;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-sizing: border-box;
    }

    button {
      background-color: #007bff;
      color: #fff;
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
      transition: 0.3s;
    }

    button:hover {
      background-color: #0056b3;
    }

    ul {
      list-style: none;
      padding: 0;
      text-align: left;
    }

    li {
      padding: 10px;
      background-color: #f9f9f9;
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid #ddd;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    li label {
      flex-grow: 1;
      margin-left: 8px;
    }

    .warning { color: red; font-weight: bold; }
    .info { color: green; font-weight: bold; }

    .vehicle-section {
      border-bottom: 2px solid #eee;
      margin-bottom: 15px;
      padding-bottom: 15px;
    }

    .signature {
      margin-top: 20px;
      font-size: 0.8em;
      color: #666;
    }

    #savedVehicles {
      margin-top: 15px;
      text-align: left;
    }

    #savedVehicles button {
      background-color: #555;
      margin-right: 5px;
    }

    #savedVehicles button:hover {
      background-color: #222;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸš— iCar Service Tracker</h1>
    <h2 id="carDetails">Î•Ï€Î¹Î»Î­Î¾Ï„Îµ ÏŒÏ‡Î·Î¼Î± Î³Î¹Î± Î½Î± Î¾ÎµÎºÎ¹Î½Î®ÏƒÎµÏ„Îµ</h2>

    <div class="vehicle-section">
      <h3>Î•Ï€Î¹Î»Î¿Î³Î® ÎŸÏ‡Î®Î¼Î±Ï„Î¿Ï‚</h3>
      <label for="brand">ÎœÎ¬ÏÎºÎ±:</label>
      <select id="brand" onchange="updateModels();">
        <option value="Audi">Audi</option>
        <option value="Smart">Smart</option>
      </select>

      <label for="model">ÎœÎ¿Î½Ï„Î­Î»Î¿:</label>
      <select id="model"></select>

      <label for="year">Î§ÏÎ¿Î½Î¿Î»Î¿Î³Î¯Î±:</label>
      <input type="number" id="year" value="2021" min="1995" max="2035">

      <label for="engine">ÎœÎ·Ï‡Î±Î½Î®:</label>
      <input type="text" id="engine" value="1.0 TFSI">

      <button onclick="saveVehicle()">ğŸ’¾ Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· ÎŸÏ‡Î®Î¼Î±Ï„Î¿Ï‚</button>
    </div>

    <div id="savedVehicles"></div>

    <label for="lastServiceDate">Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯Î¿Ï… Service:</label>
    <input type="date" id="lastServiceDate" value="2025-01-01">

    <label for="currentKm">Î¤ÏÎ­Ï‡Î¿Î½ Î§Î¹Î»Î¹Î¿Î¼ÎµÏ„ÏÎ·Ï„Î®:</label>
    <input type="number" id="currentKm" value="10000">

    <label for="monthlyKm">Î ÎµÏÎ¯Ï€Î¿Ï… Km/ÎœÎ®Î½Î±:</label>
    <input type="number" id="monthlyKm" value="1000">

    <label for="insuranceDate">Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î›Î®Î¾Î·Ï‚ Î‘ÏƒÏ†Î¬Î»ÎµÎ¹Î±Ï‚:</label>
    <input type="date" id="insuranceDate" value="2025-10-05">

    <label for="kteoDate">Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î•Ï€ÏŒÎ¼ÎµÎ½Î¿Ï… ÎšÎ¤Î•ÎŸ:</label>
    <input type="date" id="kteoDate" value="2027-01-01">

    <button onclick="updateService()">ğŸ”§ Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Service</button>

    <ul id="serviceList">
      <li data-task="Î›Î¬Î´Î¹Î± ÎºÎ¹Î½Î·Ï„Î®ÏÎ±" data-km="15000" data-months="12" data-last="2025-01-01">
        <input type="checkbox" class="done"><label>Î›Î¬Î´Î¹Î± ÎºÎ¹Î½Î·Ï„Î®ÏÎ±</label>
      </li>
      <li data-task="Î¦Î¯Î»Ï„ÏÎ¿ Î±Î­ÏÎ±" data-km="30000" data-months="24" data-last="2025-01-01">
        <input type="checkbox" class="done"><label>Î¦Î¯Î»Ï„ÏÎ¿ Î±Î­ÏÎ±</label>
      </li>
      <li data-task="Î¦Î¯Î»Ï„ÏÎ¿ ÎºÎ±Î¼Ï€Î¯Î½Î±Ï‚" data-km="30000" data-months="24" data-last="2025-01-01">
        <input type="checkbox" class="done"><label>Î¦Î¯Î»Ï„ÏÎ¿ ÎºÎ±Î¼Ï€Î¯Î½Î±Ï‚</label>
      </li>
      <li data-task="ÎœÏ€Î¿Ï…Î¶Î¯" data-km="60000" data-months="48" data-last="2025-01-01">
        <input type="checkbox" class="done"><label>ÎœÏ€Î¿Ï…Î¶Î¯</label>
      </li>
      <li data-task="ÎšÎ¤Î•ÎŸ" data-km="0" data-months="24" data-last="2025-01-01">
        <input type="checkbox" class="done"><label>ÎšÎ¤Î•ÎŸ</label>
      </li>
      <li data-task="Î‘ÏƒÏ†Î¬Î»ÎµÎ¹Î±" data-km="0" data-months="12" data-last="2025-01-01">
        <input type="checkbox" class="done"><label>Î‘ÏƒÏ†Î¬Î»ÎµÎ¹Î±</label>
      </li>
    </ul>

    <p class="signature">Developed by Mike ğŸš€</p>
  </div>

  <script>
    const modelsByBrand = {
      'Audi': ['A3', 'A4', 'Q2', 'SQ2'],
      'Smart': ['Fortwo 600cc', 'Fortwo 700cc', 'Forfour']
    };

    const servicePresets = {
      'Audi Q2': { oil:{km:15000,months:12}, airFilter:{km:30000,months:24}, cabinFilter:{km:30000,months:24}, sparkPlugs:{km:60000,months:48} },
      'Smart Fortwo 600cc': { oil:{km:10000,months:12}, airFilter:{km:20000,months:24}, cabinFilter:{km:20000,months:24}, sparkPlugs:{km:40000,months:48} },
      'default': { oil:{km:15000,months:12}, airFilter:{km:30000,months:24}, cabinFilter:{km:30000,months:24}, sparkPlugs:{km:60000,months:48} }
    };

    function updateModels() {
      const brand = document.getElementById('brand').value;
      const modelSelect = document.getElementById('model');
      modelSelect.innerHTML = '';
      (modelsByBrand[brand] || []).forEach(m => {
        const option = document.createElement('option');
        option.value = m;
        option.textContent = m;
        modelSelect.appendChild(option);
      });
    }

    function updateService() {
      const lastDateStr = document.getElementById('lastServiceDate').value;
      const currentKm = parseInt(document.getElementById('currentKm').value) || 0;
      const monthlyKm = parseInt(document.getElementById('monthlyKm').value) || 1000;
      const insuranceDateStr = document.getElementById('insuranceDate').value;
      const kteoDateStr = document.getElementById('kteoDate').value;

      const lastDate = new Date(lastDateStr);
      const insuranceDate = new Date(insuranceDateStr);
      const kteoDate = new Date(kteoDateStr);

      const items = document.querySelectorAll('#serviceList li');
      items.forEach(item => {
        const task = item.getAttribute('data-task');
        const intervalKm = parseInt(item.getAttribute('data-km')) || 0;
        const intervalMonths = parseInt(item.getAttribute('data-months')) || 0;
        let nextDate, nextKm;

        if (task === 'Î‘ÏƒÏ†Î¬Î»ÎµÎ¹Î±') nextDate = insuranceDate;
        else if (task === 'ÎšÎ¤Î•ÎŸ') nextDate = kteoDate;
        else {
          const cycles = Math.floor(currentKm / intervalKm);
          nextKm = (cycles + 1) * intervalKm;
          const nextByTime = new Date(lastDate);
          nextByTime.setMonth(nextByTime.getMonth() + intervalMonths);
          const kmDays = intervalKm > 0 ? Math.round(((nextKm - currentKm) / monthlyKm) * 30) : 0;
          const nextByKm = new Date();
          nextByKm.setDate(nextByKm.getDate() + kmDays);
          nextDate = nextByTime < nextByKm ? nextByTime : nextByKm;
        }

        const daysToNext = Math.ceil((nextDate - new Date()) / (1000*60*60*24));
        const statusClass = daysToNext < 20 ? 'warning' : (daysToNext > 365 ? 'info' : '');
        const label = item.querySelector('label');
        label.innerHTML = `<span class="${statusClass}">${task}</span> - ${isNaN(nextKm)?'':nextKm+' km'}, ${nextDate.toLocaleDateString('el-GR')} (${daysToNext} Î¼Î­ÏÎµÏ‚)`;
      });
    }

    function saveVehicle() {
      const brand = document.getElementById('brand').value;
      const model = document.getElementById('model').value;
      const year = document.getElementById('year').value;
      const engine = document.getElementById('engine').value;
      const key = `${brand}_${model}_${year}`;
      const vehicle = { brand, model, year, engine };
      localStorage.setItem(key, JSON.stringify(vehicle));
      loadSavedVehicles();
      alert("âœ… Î¤Î¿ ÏŒÏ‡Î·Î¼Î± Î±Ï€Î¿Î¸Î·ÎºÎµÏÏ„Î·ÎºÎµ!");
    }

    function loadSavedVehicles() {
      const container = document.getElementById('savedVehicles');
      container.innerHTML = '<h3>Î‘Ï€Î¿Î¸Î·ÎºÎµÏ…Î¼Î­Î½Î± ÎŸÏ‡Î®Î¼Î±Ï„Î±:</h3>';
      for (let i=0; i<localStorage.length; i++) {
        const key = localStorage.key(i);
        const v = JSON.parse(localStorage.getItem(key));
        const btn = document.createElement('button');
        btn.textContent = `${v.brand} ${v.model}`;
        btn.onclick = () => loadVehicle(v);
        container.appendChild(btn);
      }
    }

    function loadVehicle(v) {
      document.getElementById('brand').value = v.brand;
      updateModels();
      document.getElementById('model').value = v.model;
      document.getElementById('year').value = v.year;
      document.getElementById('engine').value = v.engine;
      document.getElementById('carDetails').textContent = `${v.brand} ${v.model} ${v.engine} - ${v.year}`;
      updateService();
    }

    window.onload = () => { updateModels(); loadSavedVehicles(); };
  </script>
</body>
</html>