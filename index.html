<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>iCar - Audi Q2</title>
  <style>
    body { font-family: Arial, sans-serif; background-color: #f4f4f4; text-align:center; margin:0; padding:20px; }
    .container { background-color:#fff; border-radius:10px; padding:20px; max-width:400px; margin:0 auto; box-shadow:0 0 10px rgba(0,0,0,0.1); }
    .car-image { max-width:100%; height:auto; margin-bottom:20px; }
    button { padding:10px 20px; margin:10px 0; cursor:pointer; background-color:#007bff; color:white; border:none; border-radius:5px; }
    button:hover { background-color:#0056b3; }
    input, select { width:100%; padding:10px; margin:10px 0; border:1px solid #ddd; border-radius:5px; box-sizing:border-box; }
    label { display:block; margin-top:15px; text-align:left; font-weight:bold; }
    #serviceList { list-style:none; padding:0; text-align:left; margin-top:20px; }
    #serviceList li { padding:10px; border-bottom:1px solid #ddd; background-color:#f9f9f9; border-radius:5px; margin-bottom:5px; }
    .signature { margin-top:20px; font-size:0.8em; color:#888; }
    .warning { color:red; font-weight:bold; }
    .info { color:green; font-weight:bold; }
  </style>
</head>
<body>
<div class="container">
  <h1>iCar</h1>
  <img id="carImage" src="https://i.ibb.co/4p7J2Qd/audi-q2-grey.png" alt="Audi Q2" class="car-image">
  <h2 id="carDetails">Audi Q2 1.0 TFSI - 2021</h2>

  <label for="lastServiceDate">Ημερομηνία Τελευταίου Service:</label>
  <input type="date" id="lastServiceDate" value="2025-01-01">

  <label for="currentKm">Τρέχον Χιλιομετρητή:</label>
  <input type="number" id="currentKm" value="10000">

  <label for="monthlyKm">Περίπου Km/Μήνα:</label>
  <input type="number" id="monthlyKm" value="1000" min="0">

  <label for="insuranceDate">Ημερομηνία Λήξης Ασφάλειας:</label>
  <input type="date" id="insuranceDate" value="2025-10-05">

  <label for="kteoDate">Ημερομηνία Επόμενου ΚΤΕΟ:</label>
  <input type="date" id="kteoDate" value="2027-01-01">

  <button onclick="updateService()">Ενημέρωση Service</button>

  <ul id="serviceList">
    <li data-task="Λάδια κινητήρα" data-km="15000" data-months="12" data-last="2025-01-01"></li>
    <li data-task="Φίλτρο αέρα" data-km="30000" data-months="24" data-last="2025-01-01"></li>
    <li data-task="Φίλτρο καμπίνας" data-km="30000" data-months="24" data-last="2025-01-01"></li>
    <li data-task="Μπουζί" data-km="60000" data-months="48" data-last="2025-01-01"></li>
    <li data-task="ΚΤΕΟ" data-km="0" data-months="24" data-last="2025-01-01"></li>
    <li data-task="Ασφάλεια" data-km="0" data-months="12" data-last="2025-01-01"></li>
  </ul>

  <p class="signature">Developed by Mike</p>
</div>

<script>
function updateService() {
  const lastServiceStr = document.getElementById('lastServiceDate').value;
  const currentKm = parseInt(document.getElementById('currentKm').value) || 0;
  const monthlyKm = parseInt(document.getElementById('monthlyKm').value) || 1000;
  const insuranceDate = new Date(document.getElementById('insuranceDate').value);
  const kteoDate = new Date(document.getElementById('kteoDate').value);
  const lastServiceDate = new Date(lastServiceStr);

  document.querySelectorAll('#serviceList li').forEach(item => {
    const task = item.getAttribute('data-task');
    const kmInterval = parseInt(item.getAttribute('data-km')) || 0;
    const monthsInterval = parseInt(item.getAttribute('data-months')) || 0;

    let nextKm = kmInterval > 0 ? Math.ceil(currentKm / kmInterval) * kmInterval : 'N/A';
    let nextDate;

    if (task === 'Ασφάλεια') nextDate = insuranceDate;
    else if (task === 'ΚΤΕΟ') nextDate = kteoDate;
    else {
      let nextDateTime = new Date(lastServiceDate);
      nextDateTime.setMonth(nextDateTime.getMonth() + monthsInterval);

      let kmDays = kmInterval > 0 ? Math.round((nextKm - currentKm)/monthlyKm * 30) : 0;
      let nextDateKm = new Date();
      nextDateKm.setDate(nextDateKm.getDate() + kmDays);

      nextDate = nextDateTime < nextDateKm ? nextDateTime : nextDateKm;
    }

    let daysToNext = Math.max(0, Math.ceil((nextDate - new Date())/(1000*60*60*24)));
    let statusClass = daysToNext < 20 ? 'warning' : (daysToNext > 365 ? 'info' : '');

    item.innerHTML = `<span class="${statusClass}">${task}</span> - Επόμενο: ${nextKm} km ή ${nextDate.toLocaleDateString('el-GR')} (σε ${daysToNext} μέρες)`;
  });
}

// Φόρτωση δεδομένων και ενημέρωση service list στην αρχή
window.onload = updateService;
</script>
</body>
</html>