<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>iCar</title>
<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(to right, #e3f2fd, #f1f8e9);
    margin: 0;
    padding: 0;
    color: #333;
  }

  header {
    background-color: #2196f3;
    color: white;
    text-align: center;
    padding: 15px 0;
    font-size: 26px;
    font-weight: bold;
    letter-spacing: 2px;
  }

  .container {
    max-width: 800px;
    margin: 20px auto;
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }

  h2 {
    color: #1976d2;
    margin-top: 30px;
  }

  label, select, input[type="text"], button {
    display: block;
    width: 100%;
    margin: 10px 0;
    padding: 8px;
    font-size: 16px;
  }

  select, input[type="text"] {
    border: 1px solid #ccc;
    border-radius: 6px;
  }

  button {
    background-color: #1976d2;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }

  button:hover {
    background-color: #0d47a1;
  }

  .checkbox-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    border: 1px solid #ddd;
    padding: 8px;
    border-radius: 8px;
    margin: 5px 0;
    transition: background-color 0.3s;
  }

  .checkbox-item.checked {
    background-color: #c8e6c9;
  }

  .checkbox-item input[type="text"] {
    width: 150px;
    margin-left: 10px;
  }

  footer {
    text-align: center;
    margin-top: 20px;
    color: #666;
  }
</style>
</head>
<body>

<header>🚗 iCar Service Manager</header>

<div class="container">
  <h2>Προσθήκη Οχήματος</h2>
  <label>Μάρκα:</label>
  <select id="brand">
    <option value="">--Επιλέξτε Μάρκα--</option>
    <option value="Audi">Audi</option>
    <option value="BMW">BMW</option>
    <option value="Mercedes">Mercedes</option>
    <option value="Smart">Smart</option>
    <option value="Toyota">Toyota</option>
    <option value="Peugeot">Peugeot</option>
  </select>

  <label>Μοντέλο:</label>
  <select id="model">
    <option value="">--Επιλέξτε Μοντέλο--</option>
  </select>

  <label>Χρονολογία:</label>
  <input type="text" id="year" placeholder="π.χ. 2018">

  <button id="saveVehicle">Αποθήκευση Οχήματος</button>

  <h2>Αποθηκευμένα Οχήματα</h2>
  <div id="vehicleList"></div>

  <h2>Σημεία Ελέγχου</h2>
  <div id="serviceList"></div>
</div>

<footer>by MikeMigk</footer>

<script>
const modelOptions = {
  Audi: ["A3", "A4", "A6", "Q2", "Q3", "Q5"],
  BMW: ["1 Series", "3 Series", "5 Series", "X1", "X3"],
  Mercedes: ["A-Class", "C-Class", "E-Class", "GLA", "GLC"],
  Smart: ["Fortwo", "Forfour", "Roadster"],
  Toyota: ["Yaris", "Corolla", "Aygo", "C-HR"],
  Peugeot: ["208", "308", "3008", "2008"]
};

const serviceItems = [
  "Αλλαγή λαδιών", "Φίλτρο λαδιού", "Φίλτρο αέρα", "Φίλτρο καμπίνας", 
  "Φίλτρο βενζίνης", "Υγρά φρένων", "Τακάκια", "Δίσκοι φρένων",
  "Ελαστικά", "Πίεση αέρα ελαστικών", "Αλλαγή ελαστικών",
  "Μπαταρία", "Υαλοκαθαριστήρες", "Ψυκτικό υγρό", "Ιμάντας χρονισμού",
  "Φώτα", "Στάθμη λαδιού", "Κλιματισμός", "Σύστημα διεύθυνσης",
  "Αμορτισέρ", "Εξάτμιση", "Ανάρτηση", "Διαρροές λαδιού", "Σύστημα πέδησης"
];

// φορτώνει μοντέλα ανάλογα με τη μάρκα
document.getElementById("brand").addEventListener("change", function() {
  const models = modelOptions[this.value] || [];
  const modelSelect = document.getElementById("model");
  modelSelect.innerHTML = "<option value=''>--Επιλέξτε Μοντέλο--</option>";
  models.forEach(m => {
    const opt = document.createElement("option");
    opt.value = m;
    opt.textContent = m;
    modelSelect.appendChild(opt);
  });
});

// Εμφάνιση λίστας σέρβις
const serviceList = document.getElementById("serviceList");
serviceItems.forEach(item => {
  const div = document.createElement("div");
  div.className = "checkbox-item";
  div.innerHTML = `
    <label><input type="checkbox"> ${item}</label>
    <input type="text" placeholder="Ημερομηνία/Σχόλιο">
  `;
  serviceList.appendChild(div);
});

// Χρωματισμός πρασίνου όταν τσεκάρεται
serviceList.addEventListener("change", e => {
  if (e.target.type === "checkbox") {
    const parent = e.target.closest(".checkbox-item");
    parent.classList.toggle("checked", e.target.checked);
    saveCurrentService();
  }
});

// Αποθήκευση οχήματος
document.getElementById("saveVehicle").addEventListener("click", () => {
  const brand = document.getElementById("brand").value;
  const model = document.getElementById("model").value;
  const year = document.getElementById("year").value;
  if (!brand || !model || !year) return alert("Συμπληρώστε όλα τα πεδία!");

  const vehicles = JSON.parse(localStorage.getItem("vehicles") || "[]");
  vehicles.push({ brand, model, year, services: getCurrentServiceData() });
  localStorage.setItem("vehicles", JSON.stringify(vehicles));
  loadVehicles();
});

// Αποθήκευση κατάστασης σέρβις
function getCurrentServiceData() {
  const data = [];
  document.querySelectorAll(".checkbox-item").forEach(item => {
    const checkbox = item.querySelector("input[type='checkbox']");
    const note = item.querySelector("input[type='text']").value;
    data.push({ name: item.innerText.trim(), checked: checkbox.checked, note });
  });
  return data;
}

function saveCurrentService() {
  const selectedVehicle = document.querySelector(".vehicle-item.active");
  if (!selectedVehicle) return;
  const name = selectedVehicle.dataset.name;
  const vehicles = JSON.parse(localStorage.getItem("vehicles") || "[]");
  const v = vehicles.find(v => v.brand + v.model + v.year === name);
  if (v) {
    v.services = getCurrentServiceData();
    localStorage.setItem("vehicles", JSON.stringify(vehicles));
  }
}

// Φόρτωση αποθηκευμένων οχημάτων
function loadVehicles() {
  const vehicles = JSON.parse(localStorage.getItem("vehicles") || "[]");
  const list = document.getElementById("vehicleList");
  list.innerHTML = "";
  vehicles.forEach(v => {
    const div = document.createElement("div");
    div.className = "vehicle-item";
    div.dataset.name = v.brand + v.model + v.year;
    div.textContent = `${v.brand} ${v.model} (${v.year})`;
    div.style.cursor = "pointer";
    div.onclick = () => {
      document.querySelectorAll(".vehicle-item").forEach(i => i.classList.remove("active"));
      div.classList.add("active");
      loadServiceData(v.services);
    };
    list.appendChild(div);
  });
}

function loadServiceData(services) {
  const items = document.querySelectorAll(".checkbox-item");
  items.forEach((item, i) => {
    const checkbox = item.querySelector("input[type='checkbox']");
    const note = item.querySelector("input[type='text']");
    if (services[i]) {
      checkbox.checked = services[i].checked;
      note.value = services[i].note;
      item.classList.toggle("checked", checkbox.checked);
    }
  });
}

loadVehicles();
</script>

</body>
</html>